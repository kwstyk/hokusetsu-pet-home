---
// src/components/common/Header.astro
import { SITE } from '../../config/site';

const navLinks: { href: string; label: string }[] = [
  { href: '/', label: 'ホーム' },
  { href: '/listings/', label: '物件を見る' },
  { href: '/guides/', label: '沿線・エリアガイド' },
  { href: '/blog/', label: 'ブログ・読みもの' },
  { href: '/cases/', label: '成約事例' },
  { href: '/first-time/', label: '初めての方へ' },
  { href: '/contact/', label: 'LINE・相談窓口' },
];

const currentPath = Astro.url.pathname;
---

<header class="border-b border-slate-200 bg-white/90 backdrop-blur">
  <div class="mx-auto flex max-w-5xl items-center justify-between px-4 py-3 sm:px-6 lg:px-8">
    <!-- ロゴ部分 -->
    <a href="/" class="flex items-center gap-2">
      <span class="rounded-md bg-emerald-600 px-2 py-1 text-xs font-semibold text-white">
        {SITE.shortName ?? 'HOKUSETSU PET HOME'}
      </span>
      <span class="hidden text-sm font-semibold text-slate-900 sm:inline">
        {SITE.name}
      </span>
    </a>

    <!-- PC ナビゲーション -->
<nav class="hidden items-center gap-4 text-xs font-medium text-slate-700 lg:flex">
  {navLinks.map((item) => {
    const isRoot = item.href === '/';
    const isActive = isRoot
      ? currentPath === '/'
      : currentPath.startsWith(item.href);

    return (
      <a
        href={item.href}
        class={
          'rounded-md px-2 py-1 transition-colors ' +
          (isActive
            ? 'bg-emerald-50 text-emerald-700'
            : 'text-slate-700 hover:bg-slate-100 hover:text-slate-900')
        }
      >
        {item.label}
      </a>
    );
  })}
</nav>

    <!-- PC の右端余白（今は何も置かない） -->
    <div class="hidden lg:block w-24"></div>

    <!-- モバイル ナビゲーション（<details> で簡易ハンバーガー） -->
    <details class="relative lg:hidden">
      <summary class="flex cursor-pointer list-none items-center rounded-md border border-slate-200 px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50">
        <span class="mr-1">メニュー</span>
        <span class="inline-block">
          <!-- 三本線っぽいアイコン（CSSだけで簡易表示） -->
          <span class="block h-[1px] w-4 bg-slate-700 mb-[3px]"></span>
          <span class="block h-[1px] w-4 bg-slate-700 mb-[3px]"></span>
          <span class="block h-[1px] w-4 bg-slate-700"></span>
        </span>
      </summary>
<div class="absolute right-0 z-20 mt-2 w-56 rounded-lg border border-slate-200 bg-white py-2 shadow-lg">
  {navLinks.map((item) => {
    const isRoot = item.href === '/';
    const isActive = isRoot
      ? currentPath === '/'
      : currentPath.startsWith(item.href);

    return (
      <a
        href={item.href}
        class={
          'block px-3 py-1.5 text-xs transition-colors ' +
          (isActive
            ? 'bg-emerald-50 text-emerald-700'
            : 'text-slate-700 hover:bg-slate-50')
        }
      >
        {item.label}
      </a>
    );
  })}
</div>

    </details>
  </div>
</header>
