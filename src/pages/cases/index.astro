---
// src/pages/cases/index.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import { SITE } from '../../config/site';
import { getAllCases, type CaseEntry } from '../../data/cases';
import PageHeader from '../../components/common/PageHeader.astro';
const pageTitle = `成約事例｜${SITE.name}`;
const cases: CaseEntry[] = getAllCases();
---

<BaseLayout title={pageTitle}>
  <main class="mx-auto max-w-5xl px-4 py-10 sm:px-6 lg:px-8 space-y-8 text-sm text-slate-700">
    <PageHeader
      label="CASE STUDIES"
      title="成約事例"
      lead="実際にご相談いただいたケースをもとに、「どんなお悩みがあって、どのような物件をご提案し、最終的にどう決まったか」をできる範囲で記録していく予定のページです。"
      note="現時点ではダミー事例のみ掲載しています。実際の運用フェーズでは、個人が特定されない範囲で要約した事例のみを掲載する方針です。"
      align="left"
    />
    {cases.length === 0 ? (
      <p class="text-sm text-slate-600">
        まだ公開中の成約事例はありません。準備が整い次第、こちらに掲載していきます。
      </p>
    ) : (
      <section class="space-y-4">
        <ul class="space-y-4">
          {cases.map((entry) => (
            <li class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm/5 hover:shadow-md/60 transition-shadow">
              <a href={`/cases/${entry.slug}/`} class="block space-y-2">
                <p class="text-[11px] font-semibold text-emerald-700">
                  {entry.dealType === 'rent' ? '賃貸' : '購入'} ／ {entry.areaLabel} ／ {entry.pets}
                </p>
                <h2 class="text-base md:text-lg font-semibold text-slate-900">
                  {entry.title}
                </h2>
                <p class="text-[11px] text-slate-500">
                  公開日：{entry.publishedAt} ／ エリア：{entry.city}
                </p>
                <p class="text-sm text-slate-700 line-clamp-2">
                  {entry.lead}
                </p>
                <p class="mt-1 text-[11px] text-emerald-700">
                  くわしく見る →
                </p>
              </a>
            </li>
          ))}
        </ul>
      </section>
    )}
  </main>
</BaseLayout>
